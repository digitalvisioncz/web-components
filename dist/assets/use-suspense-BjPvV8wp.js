var F=s=>{throw TypeError(s)};var Y=(s,t,o)=>t.has(s)||F("Cannot "+o);var y=(s,t,o)=>(Y(s,t,"read from private field"),o?o.call(s):t.get(s)),R=(s,t,o)=>t.has(s)?F("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,o),M=(s,t,o,e)=>(Y(s,t,"write to private field"),e?e.call(s,o):t.set(s,o),o);var N,S;class x{constructor(t){R(this,N);R(this,S,new Set);M(this,N,t)}get current(){return y(this,N)}set current(t){y(this,N)!=t&&(M(this,N,t),y(this,S).forEach(o=>o(t)))}on(t){return y(this,S).add(t),()=>y(this,S).delete(t)}}N=new WeakMap,S=new WeakMap;const z=s=>new x(s),k=Symbol.for("atomico.hooks");globalThis[k]=globalThis[k]||{};let T=globalThis[k];const V=Symbol.for("Atomico.suspense"),J=Symbol.for("Atomico.effect"),tt=Symbol.for("Atomico.layoutEffect"),K=Symbol.for("Atomico.insertionEffect"),I=(s,t,o)=>{const{i:e,hooks:r}=T.c,n=r[e]=r[e]||{};return n.value=s(n.value),n.effect=t,n.tag=o,T.c.i++,r[e].value},st=s=>I((t=z(s))=>t),et=()=>I((s=z(T.c.host))=>s),ot=()=>T.c.update,rt=(s,t,o=0)=>{let e={},r=!1;const n=()=>r,l=(f,c)=>{for(const u in e){const i=e[u];i.effect&&i.tag===f&&(i.value=i.effect(i.value,c))}};return{load:f=>{T.c={host:t,hooks:e,update:s,i:0,id:o};let c;try{r=!1,c=f()}catch(u){if(u!==V)throw u;r=!0}finally{T.c=null}return c},cleanEffects:f=>(l(K,f),()=>(l(tt,f),()=>{l(J,f)})),isSuspense:n}},C=Symbol.for;function nt(s,t){const o=s.length;if(o!==t.length)return!1;for(let e=0;e<o;e++){let r=s[e],n=t[e];if(r!==n)return!1}return!0}const g=s=>typeof s=="function",A=s=>typeof s=="object",{isArray:it}=Array,D=(s,t)=>(t?s instanceof HTMLStyleElement:!0)&&"hydrate"in((s==null?void 0:s.dataset)||{});function X(s,t){let o;const e=r=>{let{length:n}=r;for(let l=0;l<n;l++){const m=r[l];if(m&&Array.isArray(m))e(m);else{const a=typeof m;if(m==null||a==="function"||a==="boolean")continue;a==="string"||a==="number"?(o==null&&(o=""),o+=m):(o!=null&&(t(o),o=null),t(m))}}};e(s),o!=null&&t(o)}const q=(s,t,o)=>(s.addEventListener(t,o),()=>s.removeEventListener(t,o));class Z{constructor(t,o,e){this.message=o,this.target=t,this.value=e}}class ct extends Z{}class lt extends Z{}const _="Custom",ft=null,at={true:1,"":1,1:1};function ut(s,t,o,e,r){const{type:n,reflect:l,event:m,value:a,attr:f=mt(t)}=(o==null?void 0:o.name)!=_&&A(o)&&o!=ft?o:{type:o},c=(n==null?void 0:n.name)===_&&n.map,u=a!=null?n==Function||!g(a)?()=>a:a:null;Object.defineProperty(s,t,{configurable:!0,set(i){const h=this[t];u&&n!=Boolean&&i==null&&(i=u());const{error:p,value:E}=(c?pt:Et)(n,i);if(p&&E!=null)throw new ct(this,`The value defined for prop '${t}' must be of type '${n.name}'`,E);h!=E&&(this._props[t]=E??void 0,this.update(),m&&ht(this,m),this.updated.then(()=>{l&&(this._ignoreAttr=f,bt(this,n,f,this[t]),this._ignoreAttr=null)}))},get(){return this._props[t]}}),u&&(r[t]=u()),e[f]={prop:t,type:n}}const ht=(s,{type:t,base:o=CustomEvent,...e})=>s.dispatchEvent(new o(t,e)),mt=s=>s.replace(/([A-Z])/g,"-$1").toLowerCase(),bt=(s,t,o,e)=>e==null||t==Boolean&&!e?s.removeAttribute(o):s.setAttribute(o,(t==null?void 0:t.name)===_&&(t!=null&&t.serialize)?t==null?void 0:t.serialize(e):A(e)?JSON.stringify(e):t==Boolean?"":e),dt=(s,t)=>s==Boolean?!!at[t]:s==Number?Number(t):s==String?t:s==Array||s==Object?JSON.parse(t):s.name==_?t:new s(t),pt=({map:s},t)=>{try{return{value:s(t),error:!1}}catch{return{value:t,error:!0}}},Et=(s,t)=>s==null||t==null?{value:t,error:!1}:s!=String&&t===""?{value:void 0,error:!1}:s==Object||s==Array||s==Symbol?{value:t,error:{}.toString.call(t)!==`[object ${s.name}]`}:t instanceof s?{value:t,error:s==Number&&Number.isNaN(t.valueOf())}:s==String||s==Number||s==Boolean?{value:t,error:s==Number?typeof t!="number"?!0:Number.isNaN(t):s==String?typeof t!="string":typeof t!="boolean"}:{value:t,error:!0};let gt=0;const Nt=s=>{var o;const t=((o=(s==null?void 0:s.dataset)||{})==null?void 0:o.hydrate)||"";return t||"c"+gt++},yt=(s,t=HTMLElement)=>{const o={},e={},r="prototype"in t&&t.prototype instanceof Element,n=r?t:"base"in t?t.base:HTMLElement,{props:l,styles:m}=r?s:t;class a extends n{constructor(){super(),this._setup(),this._render=()=>s({...this._props});for(const c in e)this[c]=e[c]}static get styles(){return[super.styles,m]}async _setup(){if(this._props)return;this._props={};let c,u;this.mounted=new Promise(b=>this.mount=()=>{b(),c!=this.parentNode&&(u!=c?this.unmounted.then(this.update):this.update()),c=this.parentNode}),this.unmounted=new Promise(b=>this.unmount=()=>{b(),(c!=this.parentNode||!this.isConnected)&&(i.cleanEffects(!0)()(),u=this.parentNode,c=null)}),this.symbolId=this.symbolId||Symbol(),this.symbolIdParent=Symbol();const i=rt(()=>this.update(),this,Nt(this));let h,p=!0;const E=D(this);this.update=()=>(h||(h=!0,this.updated=(this.updated||this.mounted).then(()=>{try{const b=i.load(this._render),d=i.cleanEffects();return b&&b.render(this,this.symbolId,E),h=!1,p&&!i.isSuspense()&&(p=!1,!E&&St(this)),d()}finally{h=!1}}).then(b=>{b&&b()})),this.updated),this.update()}connectedCallback(){this.mount(),super.connectedCallback&&super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.unmount()}attributeChangedCallback(c,u,i){if(o[c]){if(c===this._ignoreAttr||u===i)return;const{prop:h,type:p}=o[c];try{this[h]=dt(p,i)}catch{throw new lt(this,`The value defined as attr '${c}' cannot be parsed by type '${p.name}'`,i)}}else super.attributeChangedCallback(c,u,i)}static get props(){return{...super.props,...l}}static get observedAttributes(){const c=super.observedAttributes||[];for(const u in l)ut(this.prototype,u,l[u],o,e);return Object.keys(o).concat(c)}}return a};function St(s){const{styles:t}=s.constructor,{shadowRoot:o}=s;if(o&&t.length){const e=[];X(t,r=>{r&&(r instanceof Element?o.appendChild(r.cloneNode(!0)):e.push(r))}),e.length&&(o.adoptedStyleSheets=e)}}const G=s=>(t,o)=>{I(([e,r]=[])=>((r||!r)&&(r&&nt(r,o)?e=e||!0:(g(e)&&e(),e=null)),[e,o]),([e,r],n)=>n?(g(e)&&e(),[]):[e||t(),r],s)},Ht=G(J),Tt=G(K);class At extends Array{constructor(t,o){let e=!0;const r=n=>{try{o(n,this,e)}finally{e=!1}};super(void 0,r,o),r(t)}}const Ut=s=>{const t=ot();return I((o=new At(s,(e,r,n)=>{e=g(e)?e(r[0]):e,e!==r[0]&&(r[0]=e,n||t())}))=>o)},w=C("atomico/options");globalThis[w]=globalThis[w]||{sheet:!!document.adoptedStyleSheets};const Q=globalThis[w];new Promise(s=>{Q.ssr||(document.readyState==="loading"?q(document,"DOMContentLoaded",s):s())});const Pt={checked:1,value:1,selected:1},Ct={list:1,type:1,size:1,form:1,width:1,height:1,src:1,href:1,slot:1},Ot={shadowDom:1,staticNode:1,cloneNode:1,children:1,key:1},O={},$=[];class B extends Text{}const _t=C("atomico/id"),P=C("atomico/type"),j=C("atomico/ref"),W=C("atomico/vnode"),It=()=>{};function Lt(s,t,o){return v(this,s,t,o)}const Rt=(s,t,...o)=>{const e=t||O;let{children:r}=e;if(r=r??(o.length?o:$),s===It)return r;const n=s?s instanceof Node?1:s.prototype instanceof HTMLElement&&2:0;if(n===!1&&s instanceof Function)return s(r!=$?{children:r,...e}:e);const l=Q.render||Lt;return{[P]:W,type:s,props:e,children:r,key:e.key,shadow:e.shadowDom,static:e.staticNode,raw:n,is:e.is,clone:e.cloneNode,render:l}};function v(s,t,o=_t,e,r){let n;if(t&&t[o]&&t[o].vnode==s||s[P]!=W)return t;(s||!t)&&(r=r||s.type=="svg",n=s.type!="host"&&(s.raw==1?(t&&s.clone?t[j]:t)!=s.type:s.raw==2?!(t instanceof s.type):t?t[j]||t.localName!=s.type:!t),n&&s.type!=null&&(s.raw==1&&s.clone?(e=!0,t=s.type.cloneNode(!0),t[j]=s.type):t=s.raw==1?s.type:s.raw==2?new s.type:r?document.createElementNS("http://www.w3.org/2000/svg",s.type):document.createElement(s.type,s.is?{is:s.is}:void 0)));const l=t[o]?t[o]:O,{vnode:m=O,cycle:a=0}=l;let{fragment:f,handlers:c}=l;const{children:u=$,props:i=O}=m;if(c=n?{}:c||{},s.static&&!n)return t;if(s.shadow&&!t.shadowRoot&&t.attachShadow({mode:"open",...s.shadow}),s.props!=i&&kt(t,i,s.props,c,r),s.children!==u){const h=s.shadow?t.shadowRoot:t;f=jt(s.children,f,h,o,!a&&e,r&&s.type=="foreignObject"?!1:r)}return t[o]={vnode:s,handlers:c,fragment:f,cycle:a+1},t}function Mt(s,t){const o=new B(""),e=new B("");let r;if(s[t?"prepend":"append"](o),t){let{lastElementChild:n}=s;for(;n;){const{previousElementSibling:l}=n;if(D(n,!0)&&!D(l,!0)){r=n;break}n=l}}return r?r.before(e):s.append(e),{markStart:o,markEnd:e}}function jt(s,t,o,e,r,n){s=s==null?null:it(s)?s:[s];const l=t||Mt(o,r),{markStart:m,markEnd:a,keyes:f}=l;let c;const u=f&&new Set;let i=m;if(s&&X(s,h=>{if(typeof h=="object"&&!h[P])return;const p=h[P]&&h.key,E=f&&p!=null&&f.get(p);i!=a&&i===E?u.delete(i):i=i==a?a:i.nextSibling;const b=f?E:i;let d=b;if(h[P])d=v(h,b,e,r,n);else{const L=h+"";!(d instanceof Text)||d instanceof B?d=new Text(L):d.data!=L&&(d.data=L)}d!=i&&(f&&u.delete(d),!b||f?(o.insertBefore(d,i),f&&i!=a&&u.add(i)):b==a?o.insertBefore(d,a):(o.replaceChild(d,b),i=d)),p!=null&&(c=c||new Map,c.set(p,d))}),i=i==a?a:i.nextSibling,t&&i!=a)for(;i!=a;){const h=i;i=i.nextSibling,h.remove()}return u&&u.forEach(h=>h.remove()),l.keyes=c,l}function kt(s,t,o,e,r){for(const n in t)!(n in o)&&H(s,n,t[n],null,r,e);for(const n in o)H(s,n,t[n],o[n],r,e)}function H(s,t,o,e,r,n){if(t=t=="class"&&!r?"className":t,o=o??null,e=e??null,t in s&&Pt[t]&&(o=s[t]),!(e===o||Ot[t]||t[0]=="_"))if(s.localName==="slot"&&t==="assignNode"&&"assign"in s)s.assign(e);else if(t[0]=="o"&&t[1]=="n"&&(g(e)||g(o)))Dt(s,t.slice(2),e,n);else if(t=="ref")e&&(g(e)?e(s):e.current=s);else if(t=="style"){const{style:l}=s;o=o||"",e=e||"";const m=A(o),a=A(e);if(m)for(const f in o)if(a)!(f in e)&&U(l,f,null);else break;if(a)for(const f in e){const c=e[f];m&&o[f]===c||U(l,f,c)}else l.cssText=e}else{const l=t[0]=="$"?t.slice(1):t;l===t&&(!r&&!Ct[t]&&t in s||g(e)||g(o))?s[t]=e??"":e==null?s.removeAttribute(l):s.setAttribute(l,A(e)?JSON.stringify(e):e)}}function Dt(s,t,o,e){if(e.handleEvent||(e.handleEvent=r=>e[r.type].call(s,r)),o){if(!e[t]){const r=o.capture||o.once||o.passive?Object.assign({},o):null;s.addEventListener(t,e,r)}e[t]=o}else e[t]&&(s.removeEventListener(t,e),delete e[t])}function U(s,t,o){let e="setProperty";o==null&&(e="removeProperty",o=null),~t.indexOf("-")?s[e](t,o):s[t]=o}const wt=Rt("host",{style:"display: contents"}),$t="value",Bt=(s,t)=>{const o=et(),e=st();Tt(()=>q(o.current,"ConnectContext",r=>{r.composedPath().at(0)!==r.currentTarget&&s===r.detail.id&&(r.stopPropagation(),r.detail.connect(e))}),[s]),e.current=t},Ft=s=>{const t=yt(({value:o})=>(Bt(t,o),wt),{props:{value:{type:Object,value:()=>s}}});return t[$t]=s,t};Ft({dispatch(s,t){}});export{B as M,Tt as a,st as b,Ut as c,yt as d,Ht as e,Rt as h,et as u};
